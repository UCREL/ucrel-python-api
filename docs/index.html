---

title: UCREL Python API


keywords: fastai
sidebar: home_sidebar

summary: "Python API to the <a href='http://ucrel-api.lancaster.ac.uk/'>UCREL Tool Chain.</a>"
description: "Python API to the <a href='http://ucrel-api.lancaster.ac.uk/'>UCREL Tool Chain.</a>"
nb_path: "module_notebooks/index.ipynb"
---
<!--

#################################################
### THIS FILE WAS AUTOGENERATED! DO NOT EDIT! ###
#################################################
# file to edit: module_notebooks/index.ipynb
# command to build the docs after a change: nbdev_build_docs

-->

<div class="container" id="notebook-container">
        
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="Install">Install<a class="anchor-link" href="#Install"> </a></h2><p><code>pip install ucrel_api</code></p>

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="Examples">Examples<a class="anchor-link" href="#Examples"> </a></h2><h3 id="Connecting-to-the-API">Connecting to the API<a class="anchor-link" href="#Connecting-to-the-API"> </a></h3><p>You can connect to the public <a href="http://ucrel-api.lancaster.ac.uk/">UCREL Tool Chain</a> like so:</p>

</div>
</div>
</div>
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="kn">from</span> <span class="nn">ucrel_api.api</span> <span class="kn">import</span> <span class="n">UCREL_API</span>

<span class="n">api</span> <span class="o">=</span> <span class="n">UCREL_API</span><span class="p">(</span><span class="s1">&#39;a.moore@lancaster.ac.uk&#39;</span><span class="p">,</span> <span class="s1">&#39;http://ucrel-api.lancaster.ac.uk&#39;</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>As shown it requires an email address and server address, of which the server address in this case is the address of the public UCREL Tool Chain. The email address is only used to detect misuse of the public UCREL Tool Chain. Please be kind to this public server, UCREL provides it free of charge and is not intended for extremely large numbers of repeated submission from the same site.</p>
<h3 id="USAS">USAS<a class="anchor-link" href="#USAS"> </a></h3><p>Once we have an API insance we can use it to call the <a href="http://ucrel-api.lancaster.ac.uk/usas/tagger.html">USAS tagger</a>:</p>

</div>
</div>
</div>
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">text_to_process</span> <span class="o">=</span> <span class="p">(</span><span class="s1">&#39;Hope you have a nice day. &#39;</span>
                   <span class="s1">&#39;Works with SGML entities e.g. 5 &gt; 4.&#39;</span>
                   <span class="s1">&#39;Also with MWE like New York.&#39;</span><span class="p">)</span>
<span class="n">ucrel_doc</span> <span class="o">=</span> <span class="n">api</span><span class="o">.</span><span class="n">usas</span><span class="p">(</span><span class="n">text_to_process</span><span class="p">)</span>
<span class="k">for</span> <span class="n">index</span><span class="p">,</span> <span class="n">sentence</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">ucrel_doc</span><span class="o">.</span><span class="n">sentences</span><span class="p">):</span>
    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;Sentence </span><span class="si">{</span><span class="n">index</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">)</span>
    <span class="k">for</span> <span class="n">token</span> <span class="ow">in</span> <span class="n">sentence</span><span class="p">:</span>
        <span class="nb">print</span><span class="p">(</span><span class="n">token</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">index</span> <span class="o">==</span> <span class="mi">0</span> <span class="ow">or</span> <span class="n">index</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">

<div class="output_subarea output_stream output_stdout output_text">
<pre>Sentence 0
UCREL Token: Hope	Lemma: hope	POS tag: VV0	USAS tag: X2.6+
UCREL Token: you	Lemma: you	POS tag: PPY	USAS tag: Z8mf
UCREL Token: have	Lemma: have	POS tag: VH0	USAS tag: A9+
UCREL Token: a	Lemma: a	POS tag: AT1	USAS tag: Z5
UCREL Token: nice	Lemma: nice	POS tag: JJ	USAS tag: O4.2+
UCREL Token: day	Lemma: day	POS tag: NNT1	USAS tag: T1.3
UCREL Token: .	Lemma: PUNC	POS tag: .


Sentence 1
UCREL Token: Works	Lemma: works	POS tag: NN	USAS tag: I4/H1c
UCREL Token: with	Lemma: with	POS tag: IW	USAS tag: Z5
UCREL Token: SGML	Lemma: sgml	POS tag: NP1	USAS tag: Z99
UCREL Token: entities	Lemma: entity	POS tag: NN2	USAS tag: O2
UCREL Token: e.g.	Lemma: e.g.	POS tag: REX	USAS tag: A4.1
UCREL Token: 5	Lemma: 5	POS tag: MC	USAS tag: N1
UCREL Token: &gt;	Lemma: &gt;	POS tag: FO	USAS tag: Z99
UCREL Token: 4	Lemma: 4	POS tag: MC	USAS tag: N1
UCREL Token: .	Lemma: PUNC	POS tag: .


Sentence 2
UCREL Token: Also	Lemma: also	POS tag: RR	USAS tag: N5++
UCREL Token: with	Lemma: with	POS tag: IW	USAS tag: Z5
UCREL Token: MWE	Lemma: mwe	POS tag: NP1	USAS tag: Z99
UCREL Token: like	Lemma: like	POS tag: II	USAS tag: Z5
UCREL Token: New	Lemma: new	POS tag: NP1	USAS tag: Z2	MWE tag: 2.2.1
UCREL Token: York	Lemma: york	POS tag: NP1	USAS tag: Z2	MWE tag: 2.2.2
UCREL Token: .	Lemma: PUNC	POS tag: .
</pre>
</div>
</div>

</div>
</div>

</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>The return of the <a href="/ucrel-python-api/api.html#UCREL_API.usas"><code>UCREL_API.usas</code></a> api call is a <a href="/ucrel-python-api/ucrel_doc.html#UCREL_Doc"><code>UCREL_Doc</code></a> instance, the <a href="/ucrel-python-api/ucrel_doc.html#UCREL_Doc"><code>UCREL_Doc</code></a> instance is made up of <a href="/ucrel-python-api/ucrel_token.html#UCREL_Token"><code>UCREL_Token</code></a>s. The USAS tagger provides both token level attributes and sentence segmentation as shown above.</p>

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="Development">Development<a class="anchor-link" href="#Development"> </a></h2><p>If you would like to develop on this library. Clone the repository and then install the regular requirements and the development requirements using:</p>
<div class="highlight"><pre><span></span>pip install -e .<span class="o">[</span>dev<span class="o">]</span>
</pre></div>
<p><a href="http://codumentary.blogspot.com/2014/11/python-tip-of-year-pip-install-editable.html">The <code>-e</code> is an editable flag</a> meaning that if you change anything in the library locally Python will keep track on those changes.</p>
<h3 id="Package-is-created-with-nbdev">Package is created with nbdev<a class="anchor-link" href="#Package-is-created-with-nbdev"> </a></h3><p><strong>Note</strong> as it is created with nbdev the code and documentation is generated from the notebooks that are within the <a href="./module_notebooks">./module_notebooks folder</a>.</p>
<p><strong>Note</strong> need to run the following once: <code>nbdev_install_git_hooks</code>: <a href="https://nbdev.fast.ai/tutorial.html#Install-git-hooks-to-avoid-and-handle-conflicts">"This will set up git hooks which will remove metadata from your notebooks when you commit, greatly reducing the chance you have a conflict."</a></p>
<p>The main workflow is the following:</p>
<ol>
<li>Edit the notebook(s) you want within <a href="./module_notebooks">./module_notebooks folder.</a> <strong>The README is generated from the <a href="./module_notebooks/index.ipynb">./module_notebooks/index.ipynb file.</a></strong></li>
<li>Run <code>nbdev_build_lib</code> to convert the notebook(s) into a Python module, which in this case will go into the <a href="./ucrel_api">./ucrel_api folder</a>. <strong>Note</strong> if you created a function in one python module and want to use it in another module then you will need to run <code>nbdev_build_lib</code> first, as that python module code needs to be transfered from the <a href="./module_notebooks">./module_notebooks folder.</a> into the <a href="./ucrel_api">./ucrel_api folder</a>.</li>
<li>Create the documentation using <code>nbdev_build_docs</code>.</li>
<li><strong>Optionally</strong> if you created tests run them using <code>make test</code>. When you do add tests in the notebooks you will need to import the function from the module and not rely on the function already expressed in the notebook, this is to ensure that code coverage is calculated correctly.</li>
<li><strong>Optionally</strong> if you would like to see the documentation locally see the <a href="#local-documentation">sub-section below.</a></li>
<li>Git add the relevant notebook(s), python module code, and documentation.</li>
</ol>
<h3 id="Local-documentation">Local documentation<a class="anchor-link" href="#Local-documentation"> </a></h3><p>The documentation can be ran locally via a docker container. The easiest way to run this container is through the make command:</p>
<div class="highlight"><pre><span></span>make docker_docs_serve
</pre></div>
<p><strong>NOTE</strong> This documentation does not update automatically, so it requires re-running this make command each time you want to see an updated version of the documentation.</p>
<h3 id="PYPI-Package-release">PYPI Package release<a class="anchor-link" href="#PYPI-Package-release"> </a></h3><p>To release an updated version of the package:</p>
<ol>
<li>Change the version number in <a href="./settings.ini">./settings.ini</a></li>
<li>Build the library using <code>nbdev_build_lib</code></li>
<li>Then make the package and upload it to PYPI using <code>make release</code></li>
</ol>

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="Acknowledgement">Acknowledgement<a class="anchor-link" href="#Acknowledgement"> </a></h2><p>The work has been funded by the <a href="http://ucrel.lancs.ac.uk/">UCREL research centre at Lancaster University</a>.</p>

</div>
</div>
</div>
</div>
 

